<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Running usm(s) from txt input files stored in one directory
per situation, simulated results are returned in a list — stics_wrapper • SticsOnR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Running usm(s) from txt input files stored in one directory
per situation, simulated results are returned in a list — stics_wrapper"><meta property="og:description" content="This function uses Stics directly through a system call, can
force Stics input parameters with values given in arguments."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SticsOnR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Changing_java_version_linux.html">Changing Java version procedure under linux</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/SticsRPacks/SticsOnR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Running usm(s) from txt input files stored in one directory
per <code>situation</code>, simulated results are returned in a list</h1>
    <small class="dont-index">Source: <a href="https://github.com/SticsRPacks/SticsOnR/blob/HEAD/R/stics_wrapper.R" class="external-link"><code>R/stics_wrapper.R</code></a></small>
    <div class="hidden name"><code>stics_wrapper.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function uses Stics directly through a system call, can
force Stics input parameters with values given in arguments.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">stics_wrapper</span><span class="op">(</span></span>
<span>  <span class="va">model_options</span>,</span>
<span>  param_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  situation <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sit_var_dates_mask <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sit_names <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  var_names <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>model_options</dt>
<dd><p>List containing any information needed by the model.
In the case of Stics: <code>javastics</code> (or/and <code>stics_exe</code>) and
<code>workspace</code> the path of the directory containing the Stics input data
for each USM (one folder per USM where Stics input files are stored in txt
format). See <code><a href="stics_wrapper_options.html">stics_wrapper_options()</a></code> for more information.</p></dd>


<dt>param_values</dt>
<dd><p>(optional) a named vector or a tibble that contains
values of Stics input parameters to use in the simulations.
Should have one named column per parameter.
An optional column named situation containing the name of the situations
(USMs for Stics) allows to define different values of the parameters for
different situations. If param_values is not provided, the simulations will
be performed using the parameters values defined in the Stics input files
referenced in model_options argument.</p></dd>


<dt>situation</dt>
<dd><p>(optional) vector of situations (USMs) names for which
results must be returned. Results for all simulated situations are returned
if not provided.</p></dd>


<dt>var</dt>
<dd><p>(optional) vector of variables names for which results
must be returned. If not provided, it returns the results for all simulated
variables that were already listed in the var.mod
(i.e. from the last simulation).</p></dd>


<dt>dates</dt>
<dd><p>(optional) vector of dates (POSIXct) for which results must
be returned. Results for all dates simulated are returned if not provided.
If required dates varies between situations, use sit_var_dates_mask argument</p></dd>


<dt>sit_var_dates_mask</dt>
<dd><p>(optional) List of situations: a named list
containing a mask for variables and dates for which simulated values
should be returned. Typically a list containing the observations to which
simulations should be compared as provided by <code><a href="https://rdrr.io/pkg/SticsRFiles/man/get_obs.html" class="external-link">SticsRFiles::get_obs</a></code></p></dd>


<dt>sit_names</dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> <code>sit_names</code> is no
longer supported, use <code>situation</code> instead.</p></dd>


<dt>var_names</dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> <code>var_names</code> is no
longer supported, use <code>var</code> instead.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list containing simulated values (<code>sim_list</code>: a list of tibbles
(one element per situation) and an error code (<code>error</code>) indicating if at
least one simulation ended with an error.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="stics_wrapper_options.html">stics_wrapper_options()</a></code> for more information on how to
provide <code>model_options</code>.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specifying the JavaStics folder</span></span></span>
<span class="r-in"><span><span class="va">javastics</span> <span class="op">&lt;-</span> <span class="st">"/path/to/JavaSTICS/folder"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Setting the input data folder path, root directory of the usms directories</span></span></span>
<span class="r-in"><span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="st">"/path/to/usms/subdirs/root"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Setting the mandatory simulations options</span></span></span>
<span class="r-in"><span><span class="va">sim_options</span> <span class="op">&lt;-</span> <span class="fu"><a href="stics_wrapper_options.html">stics_wrapper_options</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  javastics <span class="op">=</span> <span class="va">javastics</span>,</span></span>
<span class="r-in"><span>  workspace <span class="op">=</span> <span class="va">data_path</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Running all the usms that have a corresponding input folder in data_path</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">stics_wrapper</span><span class="op">(</span><span class="va">sim_options</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Running a sublist of usm</span></span></span>
<span class="r-in"><span><span class="va">usms_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wheat"</span>, <span class="st">"pea"</span>, <span class="st">"maize"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">stics_wrapper</span><span class="op">(</span><span class="va">sim_options</span>, situation <span class="op">=</span> <span class="va">usms_list</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Applying a single parameter values vector for the sublist of usms</span></span></span>
<span class="r-in"><span><span class="va">param_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.002</span>, <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">param_values</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dlaimax"</span>, <span class="st">"durvieF"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">stics_wrapper</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model_options <span class="op">=</span> <span class="va">sim_options</span>,</span></span>
<span class="r-in"><span>  situation <span class="op">=</span> <span class="va">usms_list</span>, param_values <span class="op">=</span> <span class="va">param_values</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Applying different values of the parameters for the usms</span></span></span>
<span class="r-in"><span><span class="co"># Let's run usm wheat with c(dlaimax=0.001, durvieF=50),</span></span></span>
<span class="r-in"><span><span class="co"># usm pea with c(dlaimax=0.001, durvieF=60),</span></span></span>
<span class="r-in"><span><span class="co"># and usm maize with c(dlaimax=0.001, durvieF=70)</span></span></span>
<span class="r-in"><span><span class="va">param_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  Situation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wheat"</span>, <span class="st">"pea"</span>, <span class="st">"maize"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  dlaimax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="fl">0.001</span>, <span class="fl">0.001</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  durvieF <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">70</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">stics_wrapper</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model_options <span class="op">=</span> <span class="va">sim_options</span>,</span></span>
<span class="r-in"><span>  param_values <span class="op">=</span> <span class="va">param_values</span>, situation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wheat"</span>, <span class="st">"pea"</span>, <span class="st">"maize"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Patrice Lecharpentier, Remi Vezy, Samuel Buis, Michel Giner.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

